(()=>{var e={};e.id=714,e.ids=[714],e.modules={3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},5336:(e,r,s)=>{"use strict";s.d(r,{A:()=>t});let t=(0,s(62688).A)("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]])},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},16189:(e,r,s)=>{"use strict";var t=s(65773);s.o(t,"useParams")&&s.d(r,{useParams:function(){return t.useParams}})},19121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},19771:e=>{"use strict";e.exports=require("process")},19837:(e,r,s)=>{"use strict";s.r(r),s.d(r,{GlobalError:()=>n.a,__next_app__:()=>u,pages:()=>d,routeModule:()=>m,tree:()=>l});var t=s(65239),a=s(48088),i=s(88170),n=s.n(i),o=s(30893),c={};for(let e in o)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(c[e]=()=>o[e]);s.d(r,c);let l={children:["",{children:["employee",{children:["[qrCode]",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,77897)),"/home/hack237/Pictures/Work/app/employee/[qrCode]/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,92347)),"/home/hack237/Pictures/Work/app/employee/layout.tsx"]}]},{layout:[()=>Promise.resolve().then(s.bind(s,58014)),"/home/hack237/Pictures/Work/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,57398,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(s.t.bind(s,89999,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(s.t.bind(s,65284,23)),"next/dist/client/components/unauthorized-error"]}]}.children,d=["/home/hack237/Pictures/Work/app/employee/[qrCode]/page.tsx"],u={require:s,loadChunk:()=>Promise.resolve()},m=new t.AppPageRouteModule({definition:{kind:a.RouteKind.APP_PAGE,page:"/employee/[qrCode]/page",pathname:"/employee/[qrCode]",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:l}})},21820:e=>{"use strict";e.exports=require("os")},27910:e=>{"use strict";e.exports=require("stream")},28354:e=>{"use strict";e.exports=require("util")},29021:e=>{"use strict";e.exports=require("fs")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},33873:e=>{"use strict";e.exports=require("path")},34631:e=>{"use strict";e.exports=require("tls")},35071:(e,r,s)=>{"use strict";s.d(r,{A:()=>t});let t=(0,s(62688).A)("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]])},37366:e=>{"use strict";e.exports=require("dns")},51361:(e,r,s)=>{"use strict";s.d(r,{A:()=>t});let t=(0,s(62688).A)("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]])},55511:e=>{"use strict";e.exports=require("crypto")},58869:(e,r,s)=>{"use strict";s.d(r,{A:()=>t});let t=(0,s(62688).A)("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]])},59821:(e,r,s)=>{"use strict";s.d(r,{E:()=>c});var t=s(60687);s(43210);var a=s(11329),i=s(24224),n=s(96241);let o=(0,i.F)("inline-flex items-center justify-center rounded-md border px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&>svg]:size-3 gap-1 [&>svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground [a&]:hover:bg-primary/90",secondary:"border-transparent bg-secondary text-secondary-foreground [a&]:hover:bg-secondary/90",destructive:"border-transparent bg-destructive text-white [a&]:hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"text-foreground [a&]:hover:bg-accent [a&]:hover:text-accent-foreground"}},defaultVariants:{variant:"default"}});function c({className:e,variant:r,asChild:s=!1,...i}){let c=s?a.DX:"span";return(0,t.jsx)(c,{"data-slot":"badge",className:(0,n.cn)(o({variant:r}),e),...i})}},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},68033:(e,r,s)=>{Promise.resolve().then(s.bind(s,77897))},73496:e=>{"use strict";e.exports=require("http2")},74075:e=>{"use strict";e.exports=require("zlib")},77897:(e,r,s)=>{"use strict";s.r(r),s.d(r,{default:()=>t});let t=(0,s(12907).registerClientReference)(function(){throw Error("Attempted to call the default export of \"/home/hack237/Pictures/Work/app/employee/[qrCode]/page.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/home/hack237/Pictures/Work/app/employee/[qrCode]/page.tsx","default")},78335:()=>{},79551:e=>{"use strict";e.exports=require("url")},81185:(e,r,s)=>{Promise.resolve().then(s.bind(s,95607))},81630:e=>{"use strict";e.exports=require("http")},91645:e=>{"use strict";e.exports=require("net")},92347:(e,r,s)=>{"use strict";s.r(r),s.d(r,{default:()=>n,metadata:()=>a,viewport:()=>i});var t=s(37413);let a={title:"Jongo E-Auth",description:"Employee interface for signing in and out"},i={width:"device-width",initialScale:1,maximumScale:1,userScalable:!1};function n({children:e}){return(0,t.jsx)(t.Fragment,{children:e})}},94735:e=>{"use strict";e.exports=require("events")},95607:(e,r,s)=>{"use strict";s.r(r),s.d(r,{default:()=>x});var t=s(60687),a=s(43210),i=s(16189),n=s(55192),o=s(24934),c=s(59821),l=s(5336),d=s(35071),u=s(58869),m=s(51361),p=s(81792);function x(){let e=(0,i.useParams)().qrCode,[r,s]=(0,a.useState)([]),[x,h]=(0,a.useState)(null),[g,f]=(0,a.useState)(null),[v,j]=(0,a.useState)(null),[y,b]=(0,a.useState)(!1),[k,N]=(0,a.useState)(null),q=(0,a.useRef)(null),w=(0,a.useRef)(null),[P,C]=(0,a.useState)(!1),S=async()=>{try{let e=await navigator.mediaDevices.getUserMedia({video:{facingMode:"user"}});q.current&&(q.current.srcObject=e,C(!0))}catch(e){console.error("Camera access denied:",e),N({success:!1,message:"Camera access required for selfie"})}},_=async()=>{if(x&&v&&x.id){b(!0);try{await (0,p.Gf)({employee_id:x.id,qrCodeId:e,actionType:g.mode,selfieData:v,ipAddress:"127.0.0.1",deviceInfo:navigator.userAgent}),N({success:!0,message:`Successfully ${"sign_in"===g.mode?"signed in":"signed out"}!`})}catch(e){N({success:!1,message:"Failed to record attendance"})}finally{b(!1)}}};return k?(0,t.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 dark:from-gray-900 dark:to-gray-800 flex items-center justify-center p-4",children:(0,t.jsx)(n.Zp,{className:"w-full max-w-md text-center",children:(0,t.jsxs)(n.Wu,{className:"pt-6",children:[k.success?(0,t.jsx)(l.A,{className:"h-16 w-16 text-green-500 mx-auto mb-4"}):(0,t.jsx)(d.A,{className:"h-16 w-16 text-red-500 mx-auto mb-4"}),(0,t.jsx)("h2",{className:"text-xl font-bold mb-2",children:k.success?"Success!":"Error"}),(0,t.jsx)("p",{className:"text-muted-foreground",children:k.message})]})})}):g?(0,t.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 dark:from-gray-900 dark:to-gray-800 p-4",children:(0,t.jsxs)("div",{className:"max-w-2xl mx-auto space-y-6",children:[(0,t.jsx)(n.Zp,{children:(0,t.jsxs)(n.aR,{className:"text-center",children:[(0,t.jsxs)(n.ZB,{className:"text-2xl font-bold",children:["Employee ","sign_in"===g.mode?"Sign In":"Sign Out"]}),(0,t.jsx)(c.E,{variant:"sign_in"===g.mode?"default":"secondary",className:"mx-auto",children:"sign_in"===g.mode?"Sign In Mode":"Sign Out Mode"})]})}),!x&&(0,t.jsxs)(n.Zp,{children:[(0,t.jsx)(n.aR,{children:(0,t.jsxs)(n.ZB,{className:"flex items-center gap-2",children:[(0,t.jsx)(u.A,{className:"h-5 w-5"}),"Select Your Name"]})}),(0,t.jsx)(n.Wu,{children:(0,t.jsx)("div",{className:"grid gap-2",children:r.filter(e=>e.id).map(e=>(0,t.jsx)(o.$,{variant:"outline",className:"justify-start h-auto p-4 bg-transparent",onClick:()=>h(e),children:(0,t.jsxs)("div",{className:"text-left",children:[(0,t.jsx)("div",{className:"font-medium",children:e.name}),(0,t.jsx)("div",{className:"text-sm text-muted-foreground",children:e.department})]})},e.id))})})]}),x&&!v&&(0,t.jsxs)(n.Zp,{children:[(0,t.jsxs)(n.aR,{children:[(0,t.jsxs)(n.ZB,{className:"flex items-center gap-2",children:[(0,t.jsx)(m.A,{className:"h-5 w-5"}),"Take Selfie"]}),(0,t.jsxs)("p",{className:"text-sm text-muted-foreground",children:["Please take a selfie to complete your ","sign_in"===g.mode?"sign in":"sign out"]})]}),(0,t.jsxs)(n.Wu,{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsxs)("p",{className:"font-medium mb-2",children:["Selected: ",x.name]}),(0,t.jsx)(c.E,{variant:"outline",children:x.department})]}),P?(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsx)("div",{className:"relative",children:(0,t.jsx)("video",{ref:q,autoPlay:!0,playsInline:!0,className:"w-full rounded-lg"})}),(0,t.jsx)(o.$,{onClick:()=>{if(q.current&&w.current){let e=w.current,r=q.current,s=e.getContext("2d");e.width=r.videoWidth,e.height=r.videoHeight,s?.drawImage(r,0,0),j(e.toDataURL("image/jpeg",.8));let t=r.srcObject;t?.getTracks().forEach(e=>e.stop()),C(!1)}},className:"w-full",children:"Take Photo"})]}):(0,t.jsxs)(o.$,{onClick:S,className:"w-full",children:[(0,t.jsx)(m.A,{className:"h-4 w-4 mr-2"}),"Start Camera"]}),(0,t.jsx)("canvas",{ref:w,className:"hidden"})]})]}),x&&v&&(0,t.jsxs)(n.Zp,{children:[(0,t.jsx)(n.aR,{children:(0,t.jsxs)(n.ZB,{children:["Confirm ","sign_in"===g.mode?"Sign In":"Sign Out"]})}),(0,t.jsxs)(n.Wu,{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"text-center space-y-2",children:[(0,t.jsx)("p",{className:"font-medium",children:x.name}),(0,t.jsx)(c.E,{variant:"outline",children:x.department})]}),(0,t.jsx)("div",{className:"text-center",children:(0,t.jsx)("img",{src:v||"/placeholder.svg",alt:"Selfie",className:"w-32 h-32 rounded-full mx-auto object-cover border-4 border-primary"})}),(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsx)(o.$,{variant:"outline",onClick:()=>j(null),className:"flex-1",children:"Retake Photo"}),(0,t.jsx)(o.$,{onClick:_,disabled:y,className:"flex-1",children:y?"Processing...":`Confirm ${"sign_in"===g.mode?"Sign In":"Sign Out"}`})]})]})]})]})}):(0,t.jsx)("div",{className:"min-h-screen bg-background flex items-center justify-center",children:(0,t.jsxs)("div",{className:"text-center space-y-4",children:[(0,t.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary mx-auto"}),(0,t.jsx)("p",{className:"text-muted-foreground",children:"Validating QR code..."})]})})}},96487:()=>{}};var r=require("../../../webpack-runtime.js");r.C(e);var s=e=>r(r.s=e),t=r.X(0,[447,629,602,171],()=>s(19837));module.exports=t})();