exports.id=171,exports.ids=[171],exports.modules={24934:(e,t,r)=>{"use strict";r.d(t,{$:()=>d});var a=r(60687);r(43210);var n=r(11329),o=r(24224),i=r(96241);let s=(0,o.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary text-primary-foreground shadow-xs hover:bg-primary/90",destructive:"bg-destructive text-white shadow-xs hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",secondary:"bg-secondary text-secondary-foreground shadow-xs hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9"}},defaultVariants:{variant:"default",size:"default"}});function d({className:e,variant:t,size:r,asChild:o=!1,...d}){let c=o?n.DX:"button";return(0,a.jsx)(c,{"data-slot":"button",className:(0,i.cn)(s({variant:t,size:r,className:e})),...d})}},35321:()=>{},42632:(e,t,r)=>{Promise.resolve().then(r.t.bind(r,86346,23)),Promise.resolve().then(r.t.bind(r,27924,23)),Promise.resolve().then(r.t.bind(r,35656,23)),Promise.resolve().then(r.t.bind(r,40099,23)),Promise.resolve().then(r.t.bind(r,38243,23)),Promise.resolve().then(r.t.bind(r,28827,23)),Promise.resolve().then(r.t.bind(r,62763,23)),Promise.resolve().then(r.t.bind(r,97173,23))},55192:(e,t,r)=>{"use strict";r.d(t,{BT:()=>d,Wu:()=>c,ZB:()=>s,Zp:()=>o,aR:()=>i});var a=r(60687);r(43210);var n=r(96241);function o({className:e,...t}){return(0,a.jsx)("div",{"data-slot":"card",className:(0,n.cn)("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm",e),...t})}function i({className:e,...t}){return(0,a.jsx)("div",{"data-slot":"card-header",className:(0,n.cn)("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",e),...t})}function s({className:e,...t}){return(0,a.jsx)("div",{"data-slot":"card-title",className:(0,n.cn)("leading-none font-semibold",e),...t})}function d({className:e,...t}){return(0,a.jsx)("div",{"data-slot":"card-description",className:(0,n.cn)("text-muted-foreground text-sm",e),...t})}function c({className:e,...t}){return(0,a.jsx)("div",{"data-slot":"card-content",className:(0,n.cn)("px-6",e),...t})}},58014:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>c,metadata:()=>d});var a=r(37413),n=r(90848),o=r.n(n),i=r(46680),s=r.n(i);r(82704);let d={title:"Jongo E-Auth",description:"Created with v0",generator:"v0.app"};function c({children:e}){return(0,a.jsxs)("html",{lang:"en",children:[(0,a.jsx)("head",{children:(0,a.jsx)("style",{children:`
html {
  font-family: ${o().style.fontFamily};
  --font-sans: ${o().variable};
  --font-mono: ${s().variable};
}
        `})}),(0,a.jsx)("body",{children:e})]})}},71769:()=>{},72136:(e,t,r)=>{Promise.resolve().then(r.t.bind(r,16444,23)),Promise.resolve().then(r.t.bind(r,16042,23)),Promise.resolve().then(r.t.bind(r,88170,23)),Promise.resolve().then(r.t.bind(r,49477,23)),Promise.resolve().then(r.t.bind(r,29345,23)),Promise.resolve().then(r.t.bind(r,12089,23)),Promise.resolve().then(r.t.bind(r,46577,23)),Promise.resolve().then(r.t.bind(r,31307,23))},81792:(e,t,r)=>{"use strict";r.d(t,{bV:()=>u,Ad:()=>g,T8:()=>l,$D:()=>v,On:()=>m,r_:()=>h,ID:()=>_,Gf:()=>p,D:()=>f,tO:()=>y});var a=r(75535),n=r(67989),o=r(70146),i=r(61448);let s=(0,n.Wp)({apiKey:"AIzaSyAKy32t3h5bIC0T--o56m982hmeFBEbk0U",authDomain:"martinez-4ab8d.firebaseapp.com",projectId:"martinez-4ab8d",storageBucket:"martinez-4ab8d.firebasestorage.app",messagingSenderId:"79056089461",appId:"1:79056089461:web:e25bb5bf9b462e83ebe33c",measurementId:"G-W17EK3Z35K"}),d=(0,a.aU)(s);function c(e){let t;let r=new Date;if(e.always_active)return{valid:!0,qrCode:e,mode:"sign_in",message:"QR code is always active"};let a=e.week_start.toDate(),n=e.week_end.toDate();if(r<a||r>n)return{valid:!1,message:"QR code has expired",qrCode:e};let o=e.work_days.split(","),i=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"][r.getDay()];if(!o.includes(i))return{valid:!1,message:"QR code is not active on this day",qrCode:e};let s=100*r.getHours()+r.getMinutes(),d=Number.parseInt(e.signin_hour.replace(":","")),c=Number.parseInt(e.inactive_hour.replace(":","")),l=Number.parseInt(e.signout_hour.replace(":",""));return"inactive"==(t=s>=d&&s<c?"sign_in":s>=c&&s<l?"sign_out":"inactive")?{valid:!1,message:"QR code is not active at this time",qrCode:e}:{valid:!0,qrCode:e,mode:t,message:`Ready for ${"sign_in"===t?"sign in":"sign out"}`}}async function l(){try{let e=(0,a.rJ)(d,"employees"),t=(0,a.P)(e,(0,a._M)("is_active","==",!0));return(await (0,a.GG)(t)).docs.map(e=>({id:e.id,...e.data()}))}catch(e){throw console.error("[v0] Error getting employees:",e),e}}async function u(e){try{let t=(0,a.rJ)(d,"employees"),r={employee_id:e.employee_id,name:e.name,email:e.email||"",department:e.department||"",position:e.position||"",is_active:!0,created_at:a.Dc.now()};return{lastID:(await (0,a.gS)(t,r)).id}}catch(e){throw console.error("[v0] Error creating employee:",e),e}}async function m(){try{let e=(0,a.rJ)(d,"qr_codes"),t=(0,a.P)(e,(0,a.AB)(1)),r=await (0,a.GG)(t);if(console.log("getCurrentQRCode: querySnapshot.empty:",r.empty),console.log("getCurrentQRCode: querySnapshot.docs:",r.docs.map(e=>e.data())),r.empty)return console.log("getCurrentQRCode: No active QR code found in database."),{valid:!1,message:"No active QR code found"};let n={id:r.docs[0].id,...r.docs[0].data()},o=c(n);return console.log("getCurrentQRCode: Validation result:",o),{...o,qrCode:n}}catch(e){return console.error("[v0] Error getting current QR code:",e),{valid:!1,message:"Error validating QR code"}}}async function g(e){try{var t;let r=(0,a.rJ)(d,"qr_codes"),n=(0,a.P)(r,(0,a._M)("is_active","==",!0)),o=(await (0,a.GG)(n)).docs.map(e=>(0,a.mZ)(e.ref,{is_active:!1}));await Promise.all(o);let i=`QR_${new Date().getFullYear()}${String(function(e){let t=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate())),r=t.getUTCDay()||7;t.setUTCDate(t.getUTCDate()+4-r);let a=new Date(Date.UTC(t.getUTCFullYear(),0,1));return Math.ceil(((t.getTime()-a.getTime())/864e5+1)/7)}(new Date)).padStart(2,"0")}_${Date.now()}`,s=w(new Date),c=(t=new Date,new Date(w(t).getTime()+5184e5)),l={name:e?.name||`Weekly QR Code - ${new Date().toLocaleDateString()}`,code:i,week_start:a.Dc.fromDate(s),week_end:a.Dc.fromDate(c),is_active:!0,always_active:e?.always_active||!1,created_at:a.Dc.now(),signin_hour:e?.signin_hour||"08:00",signout_hour:e?.signout_hour||"17:00",inactive_hour:e?.inactive_hour||"12:00",work_days:e?.work_days||"Monday,Tuesday,Wednesday,Thursday,Friday"},u=await (0,a.gS)(r,l);return{lastID:u.id,qrCode:{id:u.id,...l}}}catch(e){throw console.error("[v0] Error creating QR code:",e),e}}async function v(){try{let e=(0,a.rJ)(d,"qr_codes"),t=(0,a.P)(e,(0,a.My)("created_at","desc"));return(await (0,a.GG)(t)).docs.map(e=>({id:e.id,...e.data()}))}catch(e){throw console.error("[v0] Error getting QR codes:",e),e}}async function y(e){try{let t=(0,a.rJ)(d,"qr_codes"),r=(0,a.P)(t,(0,a._M)("code","==",e),(0,a._M)("is_active","==",!0)),n=await (0,a.GG)(r);if(n.empty)return{valid:!1,message:"Invalid or expired QR code"};let o={id:n.docs[0].id,...n.docs[0].data()};return c(o)}catch(e){return console.error("[v0] Error validating QR code:",e),{valid:!1,message:"Error validating QR code"}}}async function p(e){try{let t=(0,a.rJ)(d,"signin_out_records"),r={employee_id:e.employee_id,qr_code_id:e.qrCodeId,action_type:e.actionType,timestamp:a.Dc.now(),ip_address:e.ipAddress||"",device_info:e.deviceInfo||"",selfie_data:e.selfieData||""};return{lastID:(await (0,a.gS)(t,r)).id}}catch(e){throw console.error("[v0] Error recording sign in/out:",e),e}}async function h(e){try{let t=(0,a.rJ)(d,"signin_out_records"),r=(0,a.P)(t,(0,a.My)("timestamp","desc"));e?.employeeId&&(r=(0,a.P)(t,(0,a._M)("employee_id","==",e.employeeId),(0,a.My)("timestamp","desc")));let n=(await (0,a.GG)(r)).docs.map(e=>({id:e.id,...e.data()}));return await Promise.all(n.map(async e=>{try{let t=await (0,a.x7)((0,a.H9)(d,"employees",e.employee_id)),r=t.exists()?t.data():null,n=await (0,a.x7)((0,a.H9)(d,"qr_codes",e.qr_code_id)),o=n.exists()?n.data():null;return{...e,employee_name:r?.name||"Unknown",employee_id:r?.employee_id||"Unknown",qr_code:o?.code||"Unknown",timestamp:e.timestamp.toDate().toISOString()}}catch(t){return console.error("[v0] Error enriching record:",t),{...e,employee_name:"Unknown",employee_id:"Unknown",qr_code:"Unknown",timestamp:e.timestamp.toDate().toISOString()}}}))}catch(e){throw console.error("[v0] Error getting records:",e),e}}async function _(){try{let e=(0,a.rJ)(d,"system_config"),t=await (0,a.GG)(e),r={signin_hour:"08:00",signout_hour:"17:00",inactive_hour:"12:00",work_days:"Monday,Tuesday,Wednesday,Thursday,Friday"};return t.docs.forEach(e=>{let t=e.data();r[t.config_key]=t.config_value}),r}catch(e){throw console.error("[v0] Error getting system config:",e),e}}async function f(e,t){try{let r=(0,a.rJ)(d,"system_config"),n=(0,a.P)(r,(0,a._M)("config_key","==",e)),o=await (0,a.GG)(n);if(o.empty)await (0,a.gS)(r,{config_key:e,config_value:t,updated_at:a.Dc.now()});else{let e=o.docs[0].ref;await (0,a.mZ)(e,{config_value:t,updated_at:a.Dc.now()})}return{success:!0}}catch(e){throw console.error("[v0] Error updating system config:",e),e}}function w(e){let t=new Date(e),r=t.getDay(),a=t.getDate()-r+(0===r?-6:1);return new Date(t.setDate(a))}(0,o.c7)(s),(0,i.xI)(s)},82704:()=>{},96241:(e,t,r)=>{"use strict";r.d(t,{cn:()=>o});var a=r(49384),n=r(82348);function o(...e){return(0,n.QP)((0,a.$)(e))}}};